<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Markdown Viewer • CBF</title>

<!-- ========== MathJax CONFIG (enable $..$ and $$..$$) ========== -->
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$','$$'], ['\\[','\\]']],
      processEscapes: true
    },
    options: {
      skipHtmlTags: ['script','noscript','style','textarea','pre','code']
    }
  };
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" defer></script>

<!-- ========== Markdown Parser ========== -->
<script src="https://cdn.jsdelivr.net/npm/marked@12.0.0/marked.min.js"></script>

<!-- ========== Styling ========== -->
<style>
:root {
  --bg-0: #0b0f14;
  --panel: #151e29;
  --text-0: #eaf2ff;
  --text-1: #c7d2e5;
  --link: #79c0ff;
  --brand: #4dd0e1;
}

html, body {
  background: var(--bg-0);
  color: var(--text-0);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  line-height: 1.6;
  margin: 0;
  padding: 0;
}

body {
  max-width: 820px;
  margin: 0 auto;
  padding: 40px 24px 80px;
  background:
    radial-gradient(1200px 1200px at 10% -10%, rgba(21,32,48,.8) 0%, rgba(21,32,48,0) 55%),
    radial-gradient(1000px 900px at 110% 20%, rgba(14,23,36,.7) 0%, rgba(14,23,36,0) 60%);
  background-repeat: no-repeat;
  background-attachment: fixed;
}

h1, h2, h3, h4 {
  color: var(--text-0);
  line-height: 1.3;
}

a {
  color: var(--link);
  text-decoration: none;
}
a:hover {
  text-decoration: underline;
}

code, pre {
  font-family: ui-monospace, SFMono-Regular, Consolas, monospace;
}

pre {
  background: var(--panel);
  padding: 10px 14px;
  border-radius: 10px;
  overflow-x: auto;
  box-shadow: inset 0 0 12px rgba(0,0,0,0.4);
}

blockquote {
  border-left: 3px solid var(--brand);
  padding-left: 12px;
  color: var(--text-1);
  margin: 1em 0;
}

hr {
  border: none;
  height: 1px;
  background: color-mix(in oklab, var(--panel) 70%, transparent);
  margin: 2em 0;
}

.katex-display { margin: 1em 0; }

footer {
  margin-top: 60px;
  text-align: center;
  color: var(--text-1);
  font-size: 0.9rem;
  border-top: 1px solid color-mix(in oklab, var(--panel) 70%, transparent);
  padding-top: 20px;
}

#content {
  animation: fadeIn .3s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}
</style>
</head>

<body>
<div id="content">Loading…</div>

<footer>
 
</footer>

<!-- ========== JS Logic ========== -->
<script>
async function loadMD(filePath) {
  try {
    const res = await fetch(filePath);
    if (!res.ok) throw new Error("File not found");
    const text = await res.text();

    const el = document.getElementById("content");
    el.innerHTML = marked.parse(text);

    if (window.MathJax?.typesetPromise) {
      await MathJax.typesetPromise([el]);
    }
  } catch (err) {
    document.getElementById("content").innerHTML =
      `<p style="color:#ff6;">Error loading <code>${filePath}</code>: ${err.message}</p>`;
  }
}

// read ?file= parameter
const params = new URLSearchParams(window.location.search);
const file = params.get("file") || "/notes/example.md";
loadMD(file);
</script>
</body>
</html>
